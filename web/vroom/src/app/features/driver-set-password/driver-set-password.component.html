<!-- driver-set-password.component.html-->
<div class="profile-container">
  <h1>Account activaton</h1>

  <div class="profile-page">
    <div class="profile-section">
      <h2 class="section-title">Set password</h2>

      <form class="profile-form" (ngSubmit)="onSubmit()" #passwordForm="ngForm">
        
        <div class="input-wrapper">
          <label for="password">Password</label>
          <input
            type="password"
            id="password"
            name="password"
            [(ngModel)]="password"
            placeholder="Unesite lozinku"
            required
            [disabled]="isLoading"
          />
          
          <!-- Password strength indicator -->
          <div class="password-strength" *ngIf="password">
            <div class="strength-bar" [ngClass]="getPasswordStrength()">
              <div class="strength-fill"></div>
            </div>
            <span class="strength-text">
              <span *ngIf="getPasswordStrength() === 'weak'" class="weak">Weak</span>
              <span *ngIf="getPasswordStrength() === 'medium'" class="medium">Medium</span>
              <span *ngIf="getPasswordStrength() === 'strong'" class="strong">Strong</span>
            </span>
          </div>
          
          <div class="password-requirements">
            <small>Password must have:</small>
            <ul>
              <li [class.met]="password.length >= 8">Minimum 8 characters</li>
              <li [class.met]="/[A-Z]/.test(password)">Big letter</li>
              <li [class.met]="/[a-z]/.test(password)">Small letter</li>
              <li [class.met]="/[0-9]/.test(password)">Number</li>
            </ul>
          </div>
        </div>

        <div class="input-wrapper">
          <label for="confirmPassword">Confirm password</label>
          <input
            type="password"
            id="confirmPassword"
            name="confirmPassword"
            [(ngModel)]="confirmPassword"
            placeholder="Potvrdite lozinku"
            required
            [disabled]="isLoading"
          />
          
          <!-- Password match indicator -->
          <div class="password-match" *ngIf="confirmPassword">
            <span *ngIf="password === confirmPassword" class="match">
              ✓ Passwords match
            </span>
            <span *ngIf="password !== confirmPassword" class="no-match">
              ✗ Passwords do not match
            </span>
          </div>
        </div>

        <button 
          type="submit" 
          class="change-button"
          [disabled]="isLoading || !password || !confirmPassword"
        >
          <span *ngIf="!isLoading">Set password</span>
          <span *ngIf="isLoading">Setting...</span>
        </button>

        <!-- Messages -->
        <div *ngIf="message" class="message" [ngClass]="messageType">
          {{ message }}
        </div>
      </form>

      <div class="info-text">
        <p>
          <strong>Note:</strong> Activation link works only 24 hours!
        </p>
      </div>
    </div>
  </div>
</div>
